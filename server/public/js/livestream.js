(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["livestream"],{"0adf":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o=function(e){return Object(r["x"])("data-v-45b2be34"),e=e(),Object(r["v"])(),e},a={class:"background",ref:"mouseEvent"},c=o((function(){return Object(r["f"])("h2",null,"RaspberryPI",-1)}));function i(e,t,n,o,i,s){return Object(r["u"])(),Object(r["e"])("div",a,[c,Object(r["f"])("button",{onClick:t[0]||(t[0]=function(){return s.carControl&&s.carControl.apply(s,arguments)})},"connect"),Object(r["f"])("button",{onClick:t[1]||(t[1]=function(){return s.sendData&&s.sendData.apply(s,arguments)})},"send")],512)}var s=n("1da1"),u=(n("96cf"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("e9c4"),null),l=null,d={data:function(){return{data:1,sendChannel:null}},created:function(){var e={iceServers:[{urls:"turn:turn.stepverder.nl:3478",username:"Dominique",credential:"WS7Yq_jT"}]};l=new RTCPeerConnection(e)},computed:{},methods:{sendData:function(){console.log(this.sendChannel),u.send(this.data)},carControl:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,o,a,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="controldataipcar",r="Raspberrypi",o=new Map,c=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=2;break}return e.abrupt("return",a);case 2:return e.abrupt("return",new Promise((function(e,r){try{a=new WebSocket("wss://stepverder.nl:4084/controller"),console.log(t);var o=function r(){a.send(JSON.stringify({type:"register",peerType:n,peerId:t})),a.removeEventListener("open",r),e(a)};a.addEventListener("open",o)}catch(c){r(c)}})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.prev=4,console.log("Websocket gelukt"),t.next=8,c(n,r);case 8:i=t.sent,i.addEventListener("message",function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(r){var a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=JSON.parse(r.data),console.log(a),"offer"!==a.type){t.next=15;break}return console.log("hallo"),o.set(a.from,l),console.log("incoming data "),l.ondatachannel=function(e){console.log(e);var t=e.channel;t.onopen=function(){console.log("Verbonden")},t.onmessage=function(e){console.log(e)}},console.log(l),t.next=11,l.setRemoteDescription(a.data);case 11:return t.next=13,l.createAnswer().then((function(e){return l.setLocalDescription(e)})).then((function(){return new Promise((function(e){if("complete"===l.iceGatheringState)e();else{function t(){console.log("Ice gathering"),"complete"===l.iceGatheringState&&(l.removeEventListener("icegatheringstatechange",t),e())}l.addEventListener("icegatheringstatechange",t)}}))}));case 13:console.log(l.localDescription.sdp),i.send(JSON.stringify({to:a.from,from:n,type:"answer",data:l.localDescription}));case 15:"disconnect"===a.type&&(c=o.get(a.from),c&&(e.camera="Offline",e.statusButton="connect",e.InActive=!0,e.Active=!1,console.log("Disconnecting from",a.from),c.ontrack=null,c.onicecandidate=null,c.close(),o.delete(a.from))),t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](0),console.error(t.t0),console.log("error video beeld niet ontvangen "+t.t0);case 22:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}()),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](4),console.error(t.t0),console.log("error verbinding mislukt: "+t.t0);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})))()}}},f=(n("c5b2"),n("6b0d")),p=n.n(f);const v=p()(d,[["render",i],["__scopeId","data-v-45b2be34"]]);t["default"]=v},"0cc6":function(e,t,n){},"12fb":function(e,t,n){"use strict";n("0cc6")},"19a6":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o=function(e){return Object(r["x"])("data-v-55ab975e"),e=e(),Object(r["v"])(),e},a={class:"background",ref:"mouseEvent"},c=o((function(){return Object(r["f"])("h2",null,"controller",-1)}));function i(e,t,n,o,i,s){return Object(r["u"])(),Object(r["e"])("div",a,[c,Object(r["f"])("button",{onClick:t[0]||(t[0]=function(){return s.carControl&&s.carControl.apply(s,arguments)})},"connect"),Object(r["f"])("button",{onClick:t[1]||(t[1]=function(){return s.sendData&&s.sendData.apply(s,arguments)})},"send")],512)}var s=n("b85c"),u=n("1da1"),l=(n("96cf"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("e9c4"),null),d={data:function(){return{data:1}},created:function(){},computed:{},methods:{sendData:function(){this.data=Math.floor(100*Math.random()),console.log(this.data),l.send(this.data),window.requestAnimationFrame(this.sendData)},carControl:function(){return Object(u["a"])(regeneratorRuntime.mark((function e(){var t,n,r,o,a,c,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={sdpSemantics:"unified-plan",iceServers:[{urls:"turn:turn.stepverder.nl:3478",username:"Dominique",credential:"WS7Yq_jT"}]},n="controldata",r="controller",o=new Map,c=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=2;break}return e.abrupt("return",a);case 2:return e.abrupt("return",new Promise((function(e,r){try{a=new WebSocket("wss://stepverder.nl:4084/controller");var o=function r(){a.send(JSON.stringify({type:"register",peerType:n,peerId:t})),a.removeEventListener("open",r),e(a)};a.addEventListener("open",o)}catch(c){r(c),console.log(c)}})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.prev=5,console.log("in controller"),e.next=9,c(n,r);case 9:i=e.sent,i.addEventListener("message",function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(r){var a,c,u,d,f,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=JSON.parse(r.data),"Raspberrypis"!==a.type){e.next=19;break}console.log("raspberry pi probeert te verbinden"),c=Object(s["a"])(a.Raspberrypis),e.prev=4,d=regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=u.value,a=new RTCPeerConnection(t),o.set(r,a),a.addEventListener("icegatheringstatechange",(function(){console.log(a.connectionState)})),l=a.createDataChannel("sendDataChannel",{ordered:!1,maxRetransmits:0}),l.onopen=function(e){console.log("hi you"),l.send("Hi raspberrypi!")},console.log(l),e.next=9,a.createOffer().then((function(e){return a.setLocalDescription(e)})).then((function(){return new Promise((function(e){if("complete"===a.iceGatheringState)e();else{function t(){console.log(a.iceGatheringState),"complete"===a.iceGatheringState&&(a.removeEventListener("icegatheringstatechange",t),e())}a.addEventListener("icegatheringstatechange",t)}}))})).then((function(){console.log(a),console.log("offer wordt gestuurd"),i.send(JSON.stringify({type:"offer",to:r,from:n,data:a.localDescription}))}));case 9:case"end":return e.stop()}}),e)})),c.s();case 7:if((u=c.n()).done){e.next=11;break}return e.delegateYield(d(),"t0",9);case 9:e.next=7;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e["catch"](4),c.e(e.t1);case 16:return e.prev=16,c.f(),e.finish(16);case 19:if("answer"!==a.type){e.next=29;break}return console.log("antwoord van raspberrypi binnen"),f=o.get(a.from),console.log(a.data.sdp),e.next=25,f.setRemoteDescription(a.data);case 25:console.log(f),console.log(f.connectionState),console.log(f.iceConnectionState),console.log(f.signalingState);case 29:"disconnect"===a.type&&(p=o.get(a.from),p&&(console.log("Disconnecting from",a.from),p.close(),o.delete(a.from))),"candidate"===a.type&&(console.log("Adding candidate to",a.from),o.get(a.from));case 31:case"end":return e.stop()}}),e,null,[[4,13,16,19]])})));return function(t){return e.apply(this,arguments)}}()),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](5),console.log("error: "+e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})))()}}},f=(n("1e3d"),n("6b0d")),p=n.n(f);const v=p()(d,[["render",i],["__scopeId","data-v-55ab975e"]]);t["default"]=v},"1e3d":function(e,t,n){"use strict";n("6ecc")},"223c":function(e,t,n){"use strict";n("9526")},"2a48":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o={class:"background",ref:"mouseEvent"},a=Object(r["g"])('<h1 data-v-7d53575c>Hallo Chris</h1><p data-v-7d53575c> Hierbij ontvang je een Binance gift card ter waarde van 0.0019 BNB!</p><p data-v-7d53575c>Gift card code:</p><p class="code" data-v-7d53575c>AF2KE2YGQYAURC3U</p><div class="explenation" data-v-7d53575c><ol data-v-7d53575c><li data-v-7d53575c>Open de Binance App</li><li data-v-7d53575c>Klik op het profielpictogram in de linkerbovenhoek</li><li data-v-7d53575c>Klik op Gift Card</li><li data-v-7d53575c>Klik “Receive</li><li data-v-7d53575c>Klik “redeem” &gt; Enter gift card code</li><li data-v-7d53575c>Geniet van je BNB :)</li></ol></div><p class="signment" data-v-7d53575c>Sint en Piet</p>',6),c=["src"];function i(e,t,n,i,s,u){return Object(r["u"])(),Object(r["e"])("div",o,[a,Object(r["f"])("img",{src:s.img,alt:""},null,8,c)],512)}var s={data:function(){return{img:"https://bin.bnbstatic.com/image/giftcard/02_53_26.jpg"}},components:{},created:function(){},computed:{},methods:{}},u=(n("401e"),n("6b0d")),l=n.n(u);const d=l()(s,[["render",i],["__scopeId","data-v-7d53575c"]]);t["default"]=d},3559:function(e,t,n){"use strict";n.r(t);n("498a");var r=n("7a23"),o=function(e){return Object(r["x"])("data-v-ae0e12e0"),e=e(),Object(r["v"])(),e},a={class:"background",ref:"mouseEvent"},c={key:0,class:"row"},i={class:"information"},s={class:"data"},u=o((function(){return Object(r["f"])("h4",null,"IP CarDesktop",-1)})),l=o((function(){return Object(r["f"])("div",{class:"livefeed"},[Object(r["f"])("video",{mute:"true",playsinline:"",autoplay:"",id:"v"})],-1)})),d={key:1,class:"row"},f={class:"information"},p={class:"data"},v=o((function(){return Object(r["f"])("h4",{class:"namecar"},"IP car",-1)})),b={for:"checkbox"},g=o((function(){return Object(r["f"])("div",{class:"livefeed"},[Object(r["f"])("video",{mute:"true",playsinline:"",autoplay:"",id:"v"})],-1)})),h={key:0};function m(e,t,n,o,m,w){var O=Object(r["A"])("Joystick1"),j=Object(r["A"])("Joystick2");return Object(r["u"])(),Object(r["e"])("div",a,[m.desktop?(Object(r["u"])(),Object(r["e"])("div",c,[Object(r["f"])("div",i,[Object(r["f"])("div",s,[u,Object(r["f"])("ul",null,[Object(r["f"])("li",null,"Status: "+Object(r["C"])(m.status),1),Object(r["f"])("li",null,"Snelheid: "+Object(r["C"])(m.realSpeed)+"km/h",1),Object(r["f"])("li",null,"Accu: "+Object(r["C"])(m.accu)+"%",1),Object(r["f"])("li",null,"Camera: "+Object(r["C"])(m.camera),1)]),Object(r["f"])("div",{class:Object(r["o"])({Buttonactive:m.Active,ButtonInactive:m.Inactive}),onClick:t[0]||(t[0]=function(){return w.connect&&w.connect.apply(w,arguments)})},Object(r["C"])(m.statusButton),3)])]),l])):Object(r["d"])("",!0),m.mobile?(Object(r["u"])(),Object(r["e"])("div",d,[Object(r["f"])("div",f,[Object(r["f"])("div",p,[v,Object(r["f"])("div",{class:Object(r["o"])({Buttonactive:m.Active,ButtonInactive:m.Inactive}),onClick:t[1]||(t[1]=function(){return w.connect&&w.connect.apply(w,arguments)})},Object(r["C"])(m.statusButton),3),Object(r["f"])("ul",null,[Object(r["f"])("li",null,"Status: "+Object(r["C"])(m.status),1),Object(r["f"])("li",null,"Snelheid: "+Object(r["C"])(m.realSpeed)+"km/h",1),Object(r["f"])("li",null,"Accu: "+Object(r["C"])(m.accu)+"%",1),Object(r["f"])("li",null,"Trim: "+Object(r["C"])(m.trim),1),Object(r["f"])("li",null,[Object(r["H"])(Object(r["f"])("input",{type:"checkbox",id:"checkbox",onClick:t[2]||(t[2]=function(){return w.touchSwitch&&w.touchSwitch.apply(w,arguments)}),"onUpdate:modelValue":t[3]||(t[3]=function(e){return m.touchState=e})},null,512),[[r["E"],m.touchState]]),Object(r["f"])("label",b,"Touch control: "+Object(r["C"])(m.touchState),1)])])])]),g,m.touchVisibilty?(Object(r["u"])(),Object(r["e"])("div",h,[Object(r["i"])(O,{class:"joystick1",onChange:t[4]||(t[4]=function(e){w.handleChange("left",e)})}),Object(r["i"])(j,{class:"joystick2",onChange:t[5]||(t[5]=function(e){w.handleChange("right",e)})})])):Object(r["d"])("",!0)])):Object(r["d"])("",!0)],512)}var w=n("b85c"),O=n("1da1"),j=(n("96cf"),n("ac1f"),n("00b4"),n("d81d"),n("b680"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("e9c4"),n("0c34")),y=n("e6e5"),k=null,x=null,S={data:function(){return{status:"offline",statusButton:"connect",speed:0,realSpeed:0,accu:0,trim:0,light:"uit",camera:"offline",controller:"offline",xAxesLeft:0,sendSpeedValue:0,Inactive:!0,Active:!1,internetConnection:!1,desktop:!0,mobile:!1,touchState:!1,touchVisibilty:!1,optionButton:0,leftStick:{x:0,y:0,speed:0,angle:0},rightStick:{x:0,y:0,speed:0,angle:0},metaInfo:{meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1.0"}]}}},components:{Joystick1:j["a"],Joystick2:j["a"],controllerConnection:y["a"]},created:function(){this.gameController(),x=this},mounted:function(){this.$refs.mouseEvent.addEventListener("touchmove",(function(e){e.preventDefault(),e.stopImmediatePropagation()}),{passive:!1}),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(console.log("mobile device"),this.mobile=!0,this.desktop=!1):(console.log("not mobile device"),this.mobile=!1,this.desktop=!0)},computed:{},methods:{touchSwitch:function(){0==this.touchVisibilty?this.touchVisibilty=!0:this.touchVisibilty=!1},gameController:function(){var e=this;window.addEventListener("gamepadconnected",(function(){e.inputController(),e.gamepads=navigator.getGamepads()})),window.addEventListener("gamepaddisconnected",(function(){}))},handleChange:function(e,t){var n=t.x,r=t.y,o=t.speed,a=t.angle,c=this["".concat(e,"Stick")];c.speed=o,c.angle=a,"right"==e&&(c.y=r,this.speed=this.map(c.y,48,-48,1350,1650)),"left"==e&&(c.x=n,this.xAxesLeft=this.map(c.x,-48,48,500,2500)),1==this.mobile&&1==this.touchState&&(console.log(this.speed),k.send([this.xAxesLeft,this.speed]))},inputController:function(){var e=navigator.getGamepads();e[0]&&(this.gamepadState={id:e[0].id,axes:[e[0].axes[0]],buttons:[{button_1:e[0].buttons[0].value},{button_3:e[0].buttons[3].value},{button_4:e[0].buttons[4].value},{button_5:e[0].buttons[5].value},{button_6:e[0].buttons[6].value},{button_7:e[0].buttons[7].value},{button_9:e[0].buttons[7].value},{button_14:e[0].buttons[14].value},{button_15:e[0].buttons[15].value}]},this.Kruisje=e[0].buttons[0].value,this.Kruisje=e[0].buttons[3].value,this.optionButton=e[0].buttons[9].value,this.speed=this.map(e[0].buttons[7].value,0,1,1500,1600),this.reverse=this.map(e[0].buttons[6].value,0,1,1500,1400),this.xAxesLeft=this.map(e[0].axes[0],-1,1,500,2500),0==e[0].buttons[6].value&&(this.realSpeed=this.map(e[0].buttons[7].value,0,1,0,15)),0==e[0].buttons[7].value&&(this.realSpeed=this.map(e[0].buttons[6].value,0,1,0,15)),this.speed>1501?this.sendSpeedValue=this.speed:this.reverse<1501?this.sendSpeedValue=this.reverse:this.reverse<1499&&this.speed>1501&&(this.sendSpeedValue=1500),"online"==this.controller&&0==this.touchState&&k.send("steering: "+this.xAxesLeft+", speed: "+this.sendSpeedValue+", camera: "+this.optionButton)),window.requestAnimationFrame(this.inputController)},map:function(e,t,n,r,o){return((e-t)*(o-r)/(n-t)+r).toFixed(0)},connect:function(){this.carControl(),this.videoStream(),this.internetConnection=window.navigator.onLine,this.internetConnection?this.status="internet":this.status="No internet"},online:function(){"online"==this.controller&&"online"==this.camera&&(this.status="connected",this.statusButton="connected")},carControl:function(){return Object(O["a"])(regeneratorRuntime.mark((function e(){var t,n,r,o,a,c,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={sdpSemantics:"unified-plan",iceCandidatePoolSize:4,iceServers:[{urls:"turn:turn.stepverder.nl:3478",username:"Dominique",credential:"WS7Yq_jT"}]},n="controldata",r="controller",o=new Map,c=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=2;break}return e.abrupt("return",a);case 2:return e.abrupt("return",new Promise((function(e,r){try{a=new WebSocket("wss://stepverder.nl:4084/controller");var o=function r(){a.send(JSON.stringify({type:"register",peerType:n,peerId:t})),a.removeEventListener("open",r),e(a)};a.addEventListener("open",o)}catch(c){r(c),console.log(c)}})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.prev=5,console.log("in controller"),e.next=9,c(n,r);case 9:i=e.sent,i.addEventListener("message",function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(r){var a,c,s,u,l,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=JSON.parse(r.data),"Raspberrypis"!==a.type){e.next=19;break}console.log("raspberry pi probeert te verbinden"),c=Object(w["a"])(a.Raspberrypis),e.prev=4,u=regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=s.value,a=new RTCPeerConnection(t),o.set(r,a),a.addEventListener("icegatheringstatechange",(function(){console.log(a.connectionState)})),k=a.createDataChannel("sendDataChannel",{ordered:!1,maxRetransmits:0}),k.onopen=function(e){x.status="controller ",x.controller="online",x.online(),console.log("hi you")},console.log(k),e.next=9,a.createOffer().then((function(e){return a.setLocalDescription(e)})).then((function(){return new Promise((function(e){if("complete"===a.iceGatheringState)x.status="complete",e();else{var t=function t(){console.log(a.iceGatheringState),x.status=" Ice gathering ","complete"===a.iceGatheringState&&(a.removeEventListener("icegatheringstatechange",t),e()),setTimeout((function(){a.removeEventListener("icegatheringstatechange",t),e()}),2500)};a.addEventListener("icegatheringstatechange",t)}}))})).then((function(){console.log(a),console.log("offer wordt gestuurd"),i.send(JSON.stringify({type:"offer",to:r,from:n,data:a.localDescription}))}));case 9:case"end":return e.stop()}}),e)})),c.s();case 7:if((s=c.n()).done){e.next=11;break}return e.delegateYield(u(),"t0",9);case 9:e.next=7;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e["catch"](4),c.e(e.t1);case 16:return e.prev=16,c.f(),e.finish(16);case 19:if("answer"!==a.type){e.next=29;break}return console.log("antwoord van raspberrypi binnen"),l=o.get(a.from),console.log(a.data.sdp),e.next=25,l.setRemoteDescription(a.data);case 25:console.log(l),console.log(l.connectionState),console.log(l.iceConnectionState),console.log(l.signalingState);case 29:"disconnect"===a.type&&(d=o.get(a.from),x.status="controller disconnect",x.statusButton="connect",d&&(console.log("Disconnecting from",a.from),d.close(),o.delete(a.from)));case 30:case"end":return e.stop()}}),e,null,[[4,13,16,19]])})));return function(t){return e.apply(this,arguments)}}()),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](5),console.log("error: "+e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})))()},videoStream:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){var n,r,o,a,c,i,s,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={iceServers:[{urls:"turn:turn.stepverder.nl:3478",username:"Dominique",credential:"WS7Yq_jT"}]},r=function(){return Math.floor(1e4*Math.random())},o="ipcar"+r(),a="screen",c=new Map,s=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!i){e.next=2;break}return e.abrupt("return",i);case 2:return e.abrupt("return",new Promise((function(e,r){try{i=new WebSocket("wss://stepverder.nl:4084/ipcar"),console.log(t);var o=function r(){i.send(JSON.stringify({type:"register",peerType:n,peerId:t})),i.removeEventListener("open",r),e(i)};i.addEventListener("open",o)}catch(a){r(a)}})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.prev=6,console.log("in screen"),t.next=10,s(o,a);case 10:u=t.sent,u.addEventListener("message",function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(r){var a,i,s,l,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=JSON.parse(r.data),console.log(a),"offer"!==a.type){t.next=20;break}return i=new RTCPeerConnection(n),c.set(a.from,i),console.log("incoming data "),e.camera="online",e.statusButton="online",e.InActive=!1,e.Active=!0,i.ontrack=function(t){e.status="camera",x.online(),console.log("on track",t),window.v.srcObject=t.streams[0],window.v.play()},i.onicecandidate=function(e){console.log("set icecandidate"),e.candidate&&u.send(JSON.stringify({type:"candidate",from:o,to:a.from,data:e.candidate}))},t.next=14,i.setRemoteDescription(a.data);case 14:return t.next=16,i.createAnswer();case 16:return s=t.sent,t.next=19,i.setLocalDescription(s);case 19:u.send(JSON.stringify({to:a.from,from:o,type:"answer",data:i.localDescription}));case 20:"disconnect"===a.type&&(l=c.get(a.from),l&&(e.status="camera disconnect",e.camera="Offline",e.statusButton="connect",e.InActive=!0,e.Active=!1,console.log("Disconnecting from",a.from),l.ontrack=null,l.onicecandidate=null,l.close(),c.delete(a.from))),"candidate"===a.type&&(console.log(a.data),d=c.get(a.from),d&&(console.log("Adding candidate to",a.from),d.addIceCandidate(new RTCIceCandidate(a.data)))),t.next=28;break;case 24:t.prev=24,t.t0=t["catch"](0),console.error(t.t0),console.log("error video beeld niet ontvangen "+t.t0);case 28:case"end":return t.stop()}}),t,null,[[0,24]])})));return function(e){return t.apply(this,arguments)}}()),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](6),console.error(t.t0),console.log("error verbinding mislukt: "+t.t0);case 18:case"end":return t.stop()}}),t,null,[[6,14]])})))()}}},C=(n("12fb"),n("6b0d")),R=n.n(C);const D=R()(S,[["render",m],["__scopeId","data-v-ae0e12e0"]]);t["default"]=D},3821:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o=function(e){return Object(r["x"])("data-v-f995e1d0"),e=e(),Object(r["v"])(),e},a=o((function(){return Object(r["f"])("h3",null,"Live Video Stream (broadcast)",-1)})),c=o((function(){return Object(r["f"])("video",{mute:"true",playsinline:"",autoplay:"",id:"v",width:"50%",height:"50%"},null,-1)}));function i(e,t,n,o,i,s){return Object(r["u"])(),Object(r["e"])("div",null,[a,c,Object(r["h"])(" "+Object(r["C"])(e.$route.params.id),1)])}var s=n("b85c"),u=n("1da1"),l=(n("96cf"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("e9c4"),{data:function(){return{user:"hello"}},created:function(){this.user=this.$route.params.id,this.videoStream()},mounted:function(){},computed:{},methods:{videoStream:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,r,o,a,c,i,l,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.user),n={iceServers:[{urls:"turn:turn.stepverder.nl:3478",username:"Dominique",credential:"WS7Yq_jT"}]},r=e.user,o="camera",a=new Map,i=function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(n,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!c){t.next=2;break}return t.abrupt("return",c);case 2:return t.abrupt("return",new Promise((function(t,o){try{window.location.protocol;c=new WebSocket("wss://stepverder.nl:4084/"+e.user),console.log(c);var a=function e(){c.send(JSON.stringify({type:"register",peerType:r,peerId:n})),c.removeEventListener("open",e),t(c)};c.addEventListener("open",a)}catch(i){o(i)}})));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),t.prev=6,console.log("in camera"),t.next=10,navigator.mediaDevices.getUserMedia({video:{width:{exact:1280},height:{exact:720},frameRate:{min:30,max:120}},audio:!1});case 10:return l=t.sent,window.v.srcObject=l,window.v.play(),t.next=15,i(r,o);case 15:d=t.sent,d.addEventListener("message",function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var o,c,i,u,f,p,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=JSON.parse(t.data),console.log("msg",o),"screens"!==o.type){e.next=20;break}console.log("vraag om beeld voor candidaten"),c=Object(s["a"])(o.screens),e.prev=5,u=regeneratorRuntime.mark((function e(){var t,o,c,u,f,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=i.value,o=new RTCPeerConnection(n),a.set(t,o),c=Object(s["a"])(l.getTracks());try{for(c.s();!(u=c.n()).done;)f=u.value,o.addTrack(f,l)}catch(v){c.e(v)}finally{c.f()}return console.log(o),e.next=8,o.createOffer();case 8:return p=e.sent,e.next=11,o.setLocalDescription(p);case 11:o.onicecandidate=function(e){e.candidate&&(console.log("set ice candidate"),console.log(e),d.send(JSON.stringify({type:"candidate",from:r,to:t,data:e.candidate})))},d.send(JSON.stringify({type:"offer",to:t,from:r,data:o.localDescription})),console.log(o.connectionState);case 14:case"end":return e.stop()}}),e)})),c.s();case 8:if((i=c.n()).done){e.next=12;break}return e.delegateYield(u(),"t0",10);case 10:e.next=8;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e["catch"](5),c.e(e.t1);case 17:return e.prev=17,c.f(),e.finish(17);case 20:if("answer"!==o.type){e.next=25;break}return f=a.get(o.from),e.next=24,f.setRemoteDescription(o.data);case 24:console.log(f);case 25:"disconnect"===o.type&&(p=a.get(o.from),p&&(p.close(),a.delete(o.from))),"candidate"===o.type&&(v=a.get(o.from),v&&(v.addIceCandidate(new RTCIceCandidate(o.data)),console.log(v.connectionState)));case 27:case"end":return e.stop()}}),e,null,[[5,14,17,20]])})));return function(t){return e.apply(this,arguments)}}()),t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](6),console.log("error: "+t.t0);case 22:case"end":return t.stop()}}),t,null,[[6,19]])})))()}}}),d=(n("223c"),n("6b0d")),f=n.n(d);const p=f()(l,[["render",i],["__scopeId","data-v-f995e1d0"]]);t["default"]=p},"401e":function(e,t,n){"use strict";n("6161")},6161:function(e,t,n){},"6ecc":function(e,t,n){},9526:function(e,t,n){},c5b2:function(e,t,n){"use strict";n("d8d7")},d8d7:function(e,t,n){},f820:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o={class:"about"},a=Object(r["f"])("h1",null,"This is an about page",-1),c=[a];function i(e,t){return Object(r["u"])(),Object(r["e"])("div",o,c)}var s=n("6b0d"),u=n.n(s);const l={},d=u()(l,[["render",i]]);t["default"]=d}}]);
//# sourceMappingURL=livestream.js.map