(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["livestream"],{"19a6":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a={class:"background",ref:"mouseEvent"};function o(e,t,n,o,i,c){return Object(r["s"])(),Object(r["e"])("div",a,[Object(r["f"])("button",{onClick:t[0]||(t[0]=function(){return c.carControl&&c.carControl.apply(c,arguments)})},"connect"),Object(r["f"])("button",{onClick:t[1]||(t[1]=function(){return e.sendData&&e.sendData.apply(e,arguments)})},"send")],512)}var i=n("b85c"),c=n("1da1"),s=(n("96cf"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("e9c4"),{data:function(){return{data:1,sendChannel:null}},created:function(){},computed:{},methods:{carControl:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,s,u,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={iceServers:[{urls:"turn:turn.stepverder.nl:3478",username:"Dominique",credential:"WS7Yq_jT"}]},r="controller1",a="controller",o=new Map,u=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return",s);case 2:return e.abrupt("return",new Promise((function(e,r){try{s=new WebSocket("wss://stepverder.nl:5083");var a=function r(){s.send(JSON.stringify({type:"register",peerType:n,peerId:t})),s.removeEventListener("open",r),e(s)};s.addEventListener("open",a)}catch(o){r(o),console.log(o)}})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.prev=5,console.log("in controller"),t.next=9,u(r,a);case 9:f=t.sent,f.addEventListener("message",function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(a){var c,s,u,d,l,p,b,v,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(c=JSON.parse(a.data),console.log("msg",c),"Raspberrypi"!==c.type){t.next=29;break}console.log("raspberry pi probeert te verbinden"),s=Object(i["a"])(c.Raspberrypis),t.prev=5,s.s();case 7:if((u=s.n()).done){t.next=21;break}return d=u.value,l=new RTCPeerConnection(n),o.set(d,l),e.sendChannel=l.createDataChannel("sendDataChannel"),t.next=14,l.createOffer();case 14:return p=t.sent,t.next=17,l.setLocalDescription(p);case 17:l.onicecandidate=function(e){e.candidate&&f.send(JSON.stringify({type:"candidate",from:r,to:screen,data:e.candidate}))},f.send(JSON.stringify({type:"offer",to:screen,from:r,data:l.localDescription}));case 19:t.next=7;break;case 21:t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](5),s.e(t.t0);case 26:return t.prev=26,s.f(),t.finish(26);case 29:"answer"===c.type&&(b=o.get(c.from),b.setRemoteDescription(c.data)),"disconnect"===c.type&&(v=o.get(c.from),v&&(console.log("Disconnecting from",c.from),v.close(),o.delete(c.from))),"candidate"===c.type&&(m=o.get(c.from),m&&(console.log("Adding candidate to",c.from),m.addIceCandidate(new RTCIceCandidate(c.data))));case 32:case"end":return t.stop()}}),t,null,[[5,23,26,29]])})));return function(e){return t.apply(this,arguments)}}()),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](5),console.log("error: "+t.t0);case 16:case"end":return t.stop()}}),t,null,[[5,13]])})))()}},sendData:function(){this.sendChannel.send(this.data)}}),u=(n("5623"),n("6b0d")),f=n.n(u);const d=f()(s,[["render",o],["__scopeId","data-v-7351d46d"]]);t["default"]=d},2506:function(e,t,n){},3821:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a=function(e){return Object(r["v"])("data-v-64c576dd"),e=e(),Object(r["t"])(),e},o=a((function(){return Object(r["f"])("h3",null,"Live Video Stream (broadcast)",-1)})),i=a((function(){return Object(r["f"])("video",{mute:"true",playsinline:"",autoplay:"",id:"v",width:"50%",height:"50%"},null,-1)}));function c(e,t,n,a,c,s){return Object(r["s"])(),Object(r["e"])("div",null,[o,i,Object(r["g"])(" "+Object(r["A"])(e.$route.params.id),1)])}var s=n("b85c"),u=n("1da1"),f=(n("96cf"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("e9c4"),{data:function(){return{user:"hello"}},created:function(){this.user=this.$route.params.id,this.videoStream()},mounted:function(){},computed:{},methods:{videoStream:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i,c,f,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.user),n={iceServers:[{urls:"turn:turn.stepverder.nl:3478",username:"Dominique",credential:"WS7Yq_jT"}]},r=e.user,a="camera",o=new Map,c=function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(n,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!i){t.next=2;break}return t.abrupt("return",i);case 2:return t.abrupt("return",new Promise((function(t,a){try{window.location.protocol;i=new WebSocket("wss://stepverder.nl:4084/"+e.user);var o=function e(){i.send(JSON.stringify({type:"register",peerType:r,peerId:n})),i.removeEventListener("open",e),t(i)};i.addEventListener("open",o)}catch(c){a(c)}})));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),t.prev=6,console.log("in camera"),t.next=10,navigator.mediaDevices.getUserMedia({video:{width:{exact:1280},height:{exact:720},frameRate:{min:30,max:120}},audio:!1});case 10:return f=t.sent,window.v.srcObject=f,window.v.play(),t.next=15,c(r,a);case 15:d=t.sent,d.addEventListener("message",function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var a,i,c,u,l,p,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=JSON.parse(t.data),console.log("msg",a),"screens"!==a.type){e.next=20;break}console.log("vraag om beeld voor candidaten"),i=Object(s["a"])(a.screens),e.prev=5,u=regeneratorRuntime.mark((function e(){var t,a,i,u,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=c.value,a=new RTCPeerConnection(n),o.set(t,a),i=Object(s["a"])(f.getTracks());try{for(i.s();!(u=i.n()).done;)l=u.value,a.addTrack(l,f)}catch(b){i.e(b)}finally{i.f()}return e.next=7,a.createOffer();case 7:return p=e.sent,e.next=10,a.setLocalDescription(p);case 10:a.onicecandidate=function(e){e.candidate&&d.send(JSON.stringify({type:"candidate",from:r,to:t,data:e.candidate}))},d.send(JSON.stringify({type:"offer",to:t,from:r,data:a.localDescription}));case 12:case"end":return e.stop()}}),e)})),i.s();case 8:if((c=i.n()).done){e.next=12;break}return e.delegateYield(u(),"t0",10);case 10:e.next=8;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e["catch"](5),i.e(e.t1);case 17:return e.prev=17,i.f(),e.finish(17);case 20:"answer"===a.type&&(l=o.get(a.from),l.setRemoteDescription(a.data)),"disconnect"===a.type&&(p=o.get(a.from),p&&(console.log("Disconnecting from",a.from),p.close(),o.delete(a.from))),"candidate"===a.type&&(b=o.get(a.from),b&&(console.log("Adding candidate to",a.from),b.addIceCandidate(new RTCIceCandidate(a.data))));case 23:case"end":return e.stop()}}),e,null,[[5,14,17,20]])})));return function(t){return e.apply(this,arguments)}}()),t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](6),console.log("error: "+t.t0);case 22:case"end":return t.stop()}}),t,null,[[6,19]])})))()}}}),d=(n("edd9"),n("6b0d")),l=n.n(d);const p=l()(f,[["render",c],["__scopeId","data-v-64c576dd"]]);t["default"]=p},"428f":function(e,t,n){var r=n("da84");e.exports=r},"4df4":function(e,t,n){"use strict";var r=n("da84"),a=n("0366"),o=n("c65b"),i=n("7b0b"),c=n("9bdd"),s=n("e95a"),u=n("68ee"),f=n("07fa"),d=n("8418"),l=n("9a1f"),p=n("35a1"),b=r.Array;e.exports=function(e){var t=i(e),n=u(this),r=arguments.length,v=r>1?arguments[1]:void 0,m=void 0!==v;m&&(v=a(v,r>2?arguments[2]:void 0));var g,h,y,w,O,S,x=p(t),j=0;if(!x||this==b&&s(x))for(g=f(t),h=n?new this(g):b(g);g>j;j++)S=m?v(t[j],j):t[j],d(h,j,S);else for(w=l(t,x),O=w.next,h=n?new this:[];!(y=o(O,w)).done;j++)S=m?c(w,v,[y.value,j],!0):y.value,d(h,j,S);return h.length=j,h}},5623:function(e,t,n){"use strict";n("2506")},"746f":function(e,t,n){var r=n("428f"),a=n("1a2d"),o=n("e538"),i=n("9bf2").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});a(t,e)||i(t,e,{value:o.f(e)})}},8418:function(e,t,n){"use strict";var r=n("a04b"),a=n("9bf2"),o=n("5c6c");e.exports=function(e,t,n){var i=r(t);i in e?a.f(e,i,o(0,n)):e[i]=n}},"9b64":function(e,t,n){},"9bdd":function(e,t,n){var r=n("825a"),a=n("2a62");e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(i){a(e,"throw",i)}}},a4d3:function(e,t,n){"use strict";var r=n("23e7"),a=n("da84"),o=n("d066"),i=n("2ba4"),c=n("c65b"),s=n("e330"),u=n("c430"),f=n("83ab"),d=n("4930"),l=n("d039"),p=n("1a2d"),b=n("e8b5"),v=n("1626"),m=n("861d"),g=n("3a9b"),h=n("d9b5"),y=n("825a"),w=n("7b0b"),O=n("fc6a"),S=n("a04b"),x=n("577e"),j=n("5c6c"),k=n("7c73"),R=n("df75"),C=n("241c"),D=n("057f"),A=n("7418"),T=n("06cf"),I=n("9bf2"),E=n("d1e7"),J=n("f36a"),N=n("6eeb"),P=n("5692"),L=n("f772"),_=n("d012"),M=n("90e3"),$=n("b622"),q=n("e538"),W=n("746f"),F=n("d44e"),Y=n("69f3"),U=n("b727").forEach,Q=L("hidden"),V="Symbol",X="prototype",z=$("toPrimitive"),B=Y.set,G=Y.getterFor(V),H=Object[X],K=a.Symbol,Z=K&&K[X],ee=a.TypeError,te=a.QObject,ne=o("JSON","stringify"),re=T.f,ae=I.f,oe=D.f,ie=E.f,ce=s([].push),se=P("symbols"),ue=P("op-symbols"),fe=P("string-to-symbol-registry"),de=P("symbol-to-string-registry"),le=P("wks"),pe=!te||!te[X]||!te[X].findChild,be=f&&l((function(){return 7!=k(ae({},"a",{get:function(){return ae(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=re(H,t);r&&delete H[t],ae(e,t,n),r&&e!==H&&ae(H,t,r)}:ae,ve=function(e,t){var n=se[e]=k(Z);return B(n,{type:V,tag:e,description:t}),f||(n.description=t),n},me=function(e,t,n){e===H&&me(ue,t,n),y(e);var r=S(t);return y(n),p(se,r)?(n.enumerable?(p(e,Q)&&e[Q][r]&&(e[Q][r]=!1),n=k(n,{enumerable:j(0,!1)})):(p(e,Q)||ae(e,Q,j(1,{})),e[Q][r]=!0),be(e,r,n)):ae(e,r,n)},ge=function(e,t){y(e);var n=O(t),r=R(n).concat(Se(n));return U(r,(function(t){f&&!c(ye,n,t)||me(e,t,n[t])})),e},he=function(e,t){return void 0===t?k(e):ge(k(e),t)},ye=function(e){var t=S(e),n=c(ie,this,t);return!(this===H&&p(se,t)&&!p(ue,t))&&(!(n||!p(this,t)||!p(se,t)||p(this,Q)&&this[Q][t])||n)},we=function(e,t){var n=O(e),r=S(t);if(n!==H||!p(se,r)||p(ue,r)){var a=re(n,r);return!a||!p(se,r)||p(n,Q)&&n[Q][r]||(a.enumerable=!0),a}},Oe=function(e){var t=oe(O(e)),n=[];return U(t,(function(e){p(se,e)||p(_,e)||ce(n,e)})),n},Se=function(e){var t=e===H,n=oe(t?ue:O(e)),r=[];return U(n,(function(e){!p(se,e)||t&&!p(H,e)||ce(r,se[e])})),r};if(d||(K=function(){if(g(Z,this))throw ee("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?x(arguments[0]):void 0,t=M(e),n=function(e){this===H&&c(n,ue,e),p(this,Q)&&p(this[Q],t)&&(this[Q][t]=!1),be(this,t,j(1,e))};return f&&pe&&be(H,t,{configurable:!0,set:n}),ve(t,e)},Z=K[X],N(Z,"toString",(function(){return G(this).tag})),N(K,"withoutSetter",(function(e){return ve(M(e),e)})),E.f=ye,I.f=me,T.f=we,C.f=D.f=Oe,A.f=Se,q.f=function(e){return ve($(e),e)},f&&(ae(Z,"description",{configurable:!0,get:function(){return G(this).description}}),u||N(H,"propertyIsEnumerable",ye,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:K}),U(R(le),(function(e){W(e)})),r({target:V,stat:!0,forced:!d},{for:function(e){var t=x(e);if(p(fe,t))return fe[t];var n=K(t);return fe[t]=n,de[n]=t,n},keyFor:function(e){if(!h(e))throw ee(e+" is not a symbol");if(p(de,e))return de[e]},useSetter:function(){pe=!0},useSimple:function(){pe=!1}}),r({target:"Object",stat:!0,forced:!d,sham:!f},{create:he,defineProperty:me,defineProperties:ge,getOwnPropertyDescriptor:we}),r({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:Oe,getOwnPropertySymbols:Se}),r({target:"Object",stat:!0,forced:l((function(){A.f(1)}))},{getOwnPropertySymbols:function(e){return A.f(w(e))}}),ne){var xe=!d||l((function(){var e=K();return"[null]"!=ne([e])||"{}"!=ne({a:e})||"{}"!=ne(Object(e))}));r({target:"JSON",stat:!0,forced:xe},{stringify:function(e,t,n){var r=J(arguments),a=t;if((m(t)||void 0!==e)&&!h(e))return b(t)||(t=function(e,t){if(v(a)&&(t=c(a,this,e,t)),!h(t))return t}),r[1]=t,i(ne,null,r)}})}if(!Z[z]){var je=Z.valueOf;N(Z,z,(function(e){return c(je,this)}))}F(K,V),_[Q]=!0},a630:function(e,t,n){var r=n("23e7"),a=n("4df4"),o=n("1c7e"),i=!o((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:i},{from:a})},b0c0:function(e,t,n){var r=n("83ab"),a=n("5e77").EXISTS,o=n("e330"),i=n("9bf2").f,c=Function.prototype,s=o(c.toString),u=/^\s*function ([^ (]*)/,f=o(u.exec),d="name";r&&!a&&i(c,d,{configurable:!0,get:function(){try{return f(u,s(this))[1]}catch(e){return""}}})},b85c:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("fb6a"),n("b0c0"),n("a630"),n("ac1f"),n("00b4");function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function o(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==n["return"]||n["return"]()}finally{if(s)throw i}}}}},d28b:function(e,t,n){var r=n("746f");r("iterator")},e01a:function(e,t,n){"use strict";var r=n("23e7"),a=n("83ab"),o=n("da84"),i=n("e330"),c=n("1a2d"),s=n("1626"),u=n("3a9b"),f=n("577e"),d=n("9bf2").f,l=n("e893"),p=o.Symbol,b=p&&p.prototype;if(a&&s(p)&&(!("description"in b)||void 0!==p().description)){var v={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:f(arguments[0]),t=u(b,this)?new p(e):void 0===e?p():p(e);return""===e&&(v[t]=!0),t};l(m,p),m.prototype=b,b.constructor=m;var g="Symbol(test)"==String(p("test")),h=i(b.toString),y=i(b.valueOf),w=/^Symbol\((.*)\)[^)]+$/,O=i("".replace),S=i("".slice);d(b,"description",{configurable:!0,get:function(){var e=y(this),t=h(e);if(c(v,e))return"";var n=g?S(t,7,-1):O(t,w,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:m})}},e538:function(e,t,n){var r=n("b622");t.f=r},edd9:function(e,t,n){"use strict";n("9b64")},f820:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a={class:"about"},o=Object(r["f"])("h1",null,"This is an about page",-1),i=[o];function c(e,t){return Object(r["s"])(),Object(r["e"])("div",a,i)}var s=n("6b0d"),u=n.n(s);const f={},d=u()(f,[["render",c]]);t["default"]=d},fb6a:function(e,t,n){"use strict";var r=n("23e7"),a=n("da84"),o=n("e8b5"),i=n("68ee"),c=n("861d"),s=n("23cb"),u=n("07fa"),f=n("fc6a"),d=n("8418"),l=n("b622"),p=n("1dde"),b=n("f36a"),v=p("slice"),m=l("species"),g=a.Array,h=Math.max;r({target:"Array",proto:!0,forced:!v},{slice:function(e,t){var n,r,a,l=f(this),p=u(l),v=s(e,p),y=s(void 0===t?p:t,p);if(o(l)&&(n=l.constructor,i(n)&&(n===g||o(n.prototype))?n=void 0:c(n)&&(n=n[m],null===n&&(n=void 0)),n===g||void 0===n))return b(l,v,y);for(r=new(void 0===n?g:n)(h(y-v,0)),a=0;v<y;v++,a++)v in l&&d(r,a,l[v]);return r.length=a,r}})}}]);
//# sourceMappingURL=livestream.js.map