(function(e){function t(t){for(var r,o,c=t[0],s=t[1],l=t[2],u=0,d=[];u<c.length;u++)o=c[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);p&&p(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={app:0},i={app:0},a=[];function c(e){return s.p+"js/"+({livestream:"livestream"}[e]||e)+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={livestream:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var r="css/"+({livestream:"livestream"}[e]||e)+".css",i=s.p+r,a=document.getElementsByTagName("link"),c=0;c<a.length;c++){var l=a[c],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===r||u===i))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){l=d[c],u=l.getAttribute("data-href");if(u===r||u===i)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||i,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=r,delete o[e],p.parentNode.removeChild(p),n(a)},p.href=i;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){o[e]=0})));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((function(t,n){r=i[e]=[t,n]}));t.push(r[2]=a);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,s.nc&&u.setAttribute("nonce",s.nc),u.src=c(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(p);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",d.name="ChunkLoadError",d.type=r,d.request=o,n[1](d)}i[e]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var p=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0c34":function(e,t,n){"use strict";var r=n("7a23"),o={class:"controls"};function i(e,t,n,i,a,c){return Object(r["u"])(),Object(r["e"])("div",o,[Object(r["f"])("div",{class:"vue-joystick",ref:"touchevent",style:Object(r["p"])(c.style),onMousemove:t[0]||(t[0]=function(){return c.handleMove&&c.handleMove.apply(c,arguments)}),onMousedown:t[1]||(t[1]=function(){return c.handleStart&&c.handleStart.apply(c,arguments)}),onMouseup:t[2]||(t[2]=function(){return c.handleRelease&&c.handleRelease.apply(c,arguments)}),onTouchend:t[3]||(t[3]=function(){return c.handleRelease&&c.handleRelease.apply(c,arguments)})},null,36)])}var a={props:{color:{type:String,default:"#25B"}},data:function(){return{x:0,y:0,angle:0,speed:0,isMouseDown:!1,linksX:0,linksY:0,rechtsX:0}},computed:{style:function(){return{"--x":"".concat(this.x+64,"px"),"--y":"".concat(this.y+64,"px"),"--speed":"".concat(this.speed,"px"),"--angle":"".concat(this.angle,"deg"),"--color":"".concat(this.color)}}},methods:{handleStart:function(){this.isMouseDown=!0},handleTouch:function(e){var t=e.changedTouches;this.linksX=t[0].clientX,this.linksY=t[0].clientY;var n=this.$el,r=n.offsetLeft,o=n.offsetTop,i=Math.round(this.linksX-r-64),a=Math.round(this.linksY-o-64);this.updatePosition(i,a)},handleMove:function(e){var t=e.clientX,n=e.clientY;if(this.isMouseDown){var r=this.$el,o=r.offsetLeft,i=r.offsetTop,a=Math.round(t-o-64),c=Math.round(n-i-64);this.updatePosition(a,c)}},handleRelease:function(){this.emitAll("release"),this.isMouseDown=!1,this.updatePosition(0,0)},updatePosition:function(e,t){var n=48,r=Math.atan2(t,e),o=Math.round(180*r/Math.PI,4);this.angle=o+(o>90?-270:90),this.speed=Math.min(Math.round(Math.sqrt(Math.pow(t,2)+Math.pow(e,2))),128),this.x=this.speed>n?Math.cos(r)*n:e,this.y=this.speed>=n?Math.sin(r)*n:t,this.emitAll()},emitAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"change";this.$emit(e,{x:this.x,y:this.y,speed:this.speed,angle:this.angle})}},mounted:function(){var e=this;this.$refs.touchevent.addEventListener("touchstart",(function(t){e.handleStart(t)}),!1),this.$refs.touchevent.addEventListener("touchend",(function(t){e.handleRelease(t)}),!1),this.$refs.touchevent.addEventListener("touchcancel",(function(t){e.handleCancel(t)}),!1),this.$refs.touchevent.addEventListener("touchleave",(function(t){e.handleEnd(t)}),!1),this.$refs.touchevent.addEventListener("touchmove",(function(t){e.handleTouch(t)}),!1),console.log("initialized."),this.emitAll()}},c=(n("fc05"),n("6b0d")),s=n.n(c);const l=s()(a,[["render",i]]);t["a"]=l},2918:function(e,t,n){"use strict";n("c15d")},"2d0a":function(e,t,n){"use strict";n("a5be")},"368c":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function o(e,t){var n=Object(r["A"])("router-view");return Object(r["u"])(),Object(r["c"])(n)}n("2918");var i=n("6b0d"),a=n.n(i);const c={},s=a()(c,[["render",o]]);var l=s,u=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),d=(n("498a"),function(e){return Object(r["x"])("data-v-382ace80"),e=e(),Object(r["v"])(),e}),p={class:"background",ref:"mouseEvent"},h={key:0,class:"row"},f={class:"information"},v={class:"data"},b=d((function(){return Object(r["f"])("h4",null,"IP CarDesktop",-1)})),m=d((function(){return Object(r["f"])("div",{class:"livefeed"},[Object(r["f"])("video",{mute:"true",playsinline:"",autoplay:"",id:"v"})],-1)})),g={key:1,class:"row"},w={key:0,class:"landscape"},y={class:"information"},O={class:"data"},j=d((function(){return Object(r["f"])("h4",{class:"namecar"},"IP CAR",-1)})),k=d((function(){return Object(r["f"])("label",{for:"checkbox"},"Touch control",-1)})),x=d((function(){return Object(r["f"])("div",{class:"livefeed"},[Object(r["f"])("video",{mute:"true",playsinline:"",autoplay:"",id:"v"})],-1)})),S={key:0},C={key:1,class:"portrait"},R=d((function(){return Object(r["f"])("div",{class:"welcomeText"},[Object(r["f"])("h1",null,"Welkom"),Object(r["f"])("div",{class:"welcomeInfo"},[Object(r["f"])("p",null,"Kantel je smartphone, in landscape mode om de app te gebruiken"),Object(r["f"])("p",null,"Het is aan te raden om de website te installeren op het homescherm. Dit kan via de instellingen van de browser")])],-1)})),L=[R];function E(e,t,n,o,i,a){var c=Object(r["A"])("Joystick1"),s=Object(r["A"])("Joystick2");return Object(r["u"])(),Object(r["e"])("div",p,[i.desktop?(Object(r["u"])(),Object(r["e"])("div",h,[Object(r["f"])("div",f,[Object(r["f"])("div",v,[b,Object(r["f"])("ul",null,[Object(r["f"])("li",null,"Status: "+Object(r["C"])(i.status),1),Object(r["f"])("li",null,"Snelheid: "+Object(r["C"])(i.realSpeed)+"km/h",1),Object(r["f"])("li",null,"Accu: "+Object(r["C"])(i.accu)+"%",1),Object(r["f"])("li",null,"Camera: "+Object(r["C"])(i.camera),1)]),Object(r["f"])("div",{class:Object(r["o"])({Buttonactive:i.Active,ButtonInactive:i.Inactive}),onClick:t[0]||(t[0]=function(){return a.connect&&a.connect.apply(a,arguments)})},Object(r["C"])(i.statusButton),3)])]),m])):Object(r["d"])("",!0),i.mobile?(Object(r["u"])(),Object(r["e"])("div",g,[i.landscape?(Object(r["u"])(),Object(r["e"])("div",w,[Object(r["f"])("div",y,[Object(r["f"])("div",O,[j,Object(r["f"])("div",{class:Object(r["o"])({Buttonactive:i.Active,ButtonInactive:i.Inactive}),onClick:t[1]||(t[1]=function(){return a.connect&&a.connect.apply(a,arguments)})},Object(r["C"])(i.statusButton),3),Object(r["f"])("ul",null,[Object(r["f"])("li",null,"Status: "+Object(r["C"])(i.status),1),Object(r["f"])("li",null,"Snelheid: "+Object(r["C"])(i.realSpeed)+"km/h",1),Object(r["f"])("li",null,"Accu: "+Object(r["C"])(i.accu)+"%",1),Object(r["f"])("li",null,"Trim: "+Object(r["C"])(i.trim),1),Object(r["f"])("li",null,"Phone: "+Object(r["C"])(i.orrientationPhone),1),Object(r["f"])("li",null,[Object(r["H"])(Object(r["f"])("input",{type:"checkbox",id:"checkbox",onClick:t[2]||(t[2]=function(){return a.touchSwitch&&a.touchSwitch.apply(a,arguments)}),"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.touchState=e})},null,512),[[r["E"],i.touchState]]),k])])])]),x,i.touchVisibilty?(Object(r["u"])(),Object(r["e"])("div",S,[Object(r["i"])(c,{class:"joystick1",onChange:t[4]||(t[4]=function(e){a.handleChange("left",e)})}),Object(r["i"])(s,{class:"joystick2",onChange:t[5]||(t[5]=function(e){a.handleChange("right",e)})})])):Object(r["d"])("",!0)])):Object(r["d"])("",!0),i.portrait?(Object(r["u"])(),Object(r["e"])("div",C,L)):Object(r["d"])("",!0)])):Object(r["d"])("",!0)],512)}var A=n("b85c"),M=n("1da1"),P=(n("96cf"),n("ac1f"),n("00b4"),n("d81d"),n("b680"),n("4ec9"),n("e9c4"),n("0c34")),D=n("e6e5"),T=n("552e"),_=null,B=null,I={data:function(){return Object(T["b"])({meta:[{name:"viewport",content:"initial-scale=1, viewport-fit=cover"}]}),{status:"offline",statusButton:"connect",speed:0,realSpeed:0,accu:0,trim:0,light:"uit",camera:"offline",controller:"offline",xAxesLeft:0,sendSpeedValue:0,Inactive:!0,Active:!1,internetConnection:!1,desktop:!0,mobile:!1,touchState:!1,touchVisibilty:!1,optionButton:0,orrientationPhone:"portrait",portrait:!0,landscape:!1,leftStick:{x:0,y:0,speed:0,angle:0},rightStick:{x:0,y:0,speed:0,angle:0}}},components:{Joystick1:P["a"],Joystick2:P["a"],controllerConnection:D["a"]},created:function(){this.gameController(),B=this},mounted:function(){window.innerWidth>window.innerHeight&&(this.portrait=!1,this.landscape=!0,console.log("landscap")),window.innerHeight>window.innerWidth&&(this.portrait=!0,this.landscape=!1),window.addEventListener("resize",this.handleOrientationChange),this.$refs.mouseEvent.addEventListener("touchmove",(function(e){e.preventDefault(),e.stopImmediatePropagation()}),{passive:!1}),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(console.log("mobile device"),this.mobile=!0,this.desktop=!1):(console.log("not mobile device"),this.mobile=!1,this.desktop=!0)},computed:{},methods:{handleOrientationChange:function(){window.innerWidth>window.innerHeight&&(this.portrait=!1,this.landscape=!0,console.log("landscapp")),window.innerHeight>window.innerWidth&&(this.portrait=!0,this.landscape=!1,console.log("portrait"))},touchSwitch:function(){0==this.touchVisibilty?this.touchVisibilty=!0:this.touchVisibilty=!1},gameController:function(){var e=this;window.addEventListener("gamepadconnected",(function(){e.inputController(),e.gamepads=navigator.getGamepads()})),window.addEventListener("gamepaddisconnected",(function(){}))},handleChange:function(e,t){var n=t.x,r=t.y,o=t.speed,i=t.angle,a=this["".concat(e,"Stick")];a.speed=o,a.angle=i,"right"==e&&(a.y=r,this.speed=this.map(a.y,48,-48,1350,1650)),"left"==e&&(a.x=n,this.xAxesLeft=this.map(a.x,-48,48,500,2500)),1==this.mobile&&1==this.touchState&&(console.log(this.speed),_.send([this.xAxesLeft,this.speed]))},inputController:function(){var e=navigator.getGamepads();e[0]&&(this.gamepadState={id:e[0].id,axes:[e[0].axes[0]],buttons:[{button_1:e[0].buttons[0].value},{button_3:e[0].buttons[3].value},{button_4:e[0].buttons[4].value},{button_5:e[0].buttons[5].value},{button_6:e[0].buttons[6].value},{button_7:e[0].buttons[7].value},{button_9:e[0].buttons[7].value},{button_14:e[0].buttons[14].value},{button_15:e[0].buttons[15].value}]},this.Kruisje=e[0].buttons[0].value,this.Kruisje=e[0].buttons[3].value,this.optionButton=e[0].buttons[9].value,this.speed=this.map(e[0].buttons[7].value,0,1,1500,1600),this.reverse=this.map(e[0].buttons[6].value,0,1,1500,1400),this.xAxesLeft=this.map(e[0].axes[0],-1,1,500,2500),0==e[0].buttons[6].value&&(this.realSpeed=this.map(e[0].buttons[7].value,0,1,0,15)),0==e[0].buttons[7].value&&(this.realSpeed=this.map(e[0].buttons[6].value,0,1,0,15)),this.speed>1501?this.sendSpeedValue=this.speed:this.reverse<1501?this.sendSpeedValue=this.reverse:this.reverse<1499&&this.speed>1501&&(this.sendSpeedValue=1500),"online"==this.controller&&0==this.touchState&&_.send("steering: "+this.xAxesLeft+", speed: "+this.sendSpeedValue+", camera: "+this.optionButton)),window.requestAnimationFrame(this.inputController)},map:function(e,t,n,r,o){return((e-t)*(o-r)/(n-t)+r).toFixed(0)},connect:function(){this.carControl(),this.videoStream(),this.internetConnection=window.navigator.onLine,this.internetConnection?this.status="internet":this.status="No internet"},online:function(){"online"==this.controller&&"online"==this.camera&&(this.status="connected",this.statusButton="connected")},carControl:function(){return Object(M["a"])(regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={sdpSemantics:"unified-plan",iceCandidatePoolSize:4,iceServers:[{urls:"turn:turn.stepverder.nl:3478",username:"Dominique",credential:"WS7Yq_jT"}]},n="controldata",r="controller",o=new Map,a=function(){var e=Object(M["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!i){e.next=2;break}return e.abrupt("return",i);case 2:return e.abrupt("return",new Promise((function(e,r){try{i=new WebSocket("wss://stepverder.nl:4084/controller");var o=function r(){i.send(JSON.stringify({type:"register",peerType:n,peerId:t})),i.removeEventListener("open",r),e(i)};i.addEventListener("open",o)}catch(a){r(a),console.log(a)}})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.prev=5,console.log("in controller"),e.next=9,a(n,r);case 9:c=e.sent,c.addEventListener("message",function(){var e=Object(M["a"])(regeneratorRuntime.mark((function e(r){var i,a,s,l,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=JSON.parse(r.data),"Raspberrypis"!==i.type){e.next=19;break}console.log("raspberry pi probeert te verbinden"),a=Object(A["a"])(i.Raspberrypis),e.prev=4,l=regeneratorRuntime.mark((function e(){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=s.value,i=new RTCPeerConnection(t),o.set(r,i),i.addEventListener("icegatheringstatechange",(function(){console.log(i.connectionState)})),_=i.createDataChannel("sendDataChannel",{ordered:!1,maxRetransmits:0}),_.onopen=function(e){B.status="controller ",B.controller="online",B.online(),console.log("hi you")},console.log(_),e.next=9,i.createOffer().then((function(e){return i.setLocalDescription(e)})).then((function(){return new Promise((function(e){if("complete"===i.iceGatheringState)B.status="complete",e();else{var t=function t(){console.log(i.iceGatheringState),B.status=" Ice gathering ","complete"===i.iceGatheringState&&(i.removeEventListener("icegatheringstatechange",t),e()),setTimeout((function(){i.removeEventListener("icegatheringstatechange",t),e()}),2500)};i.addEventListener("icegatheringstatechange",t)}}))})).then((function(){console.log(i),console.log("offer wordt gestuurd"),c.send(JSON.stringify({type:"offer",to:r,from:n,data:i.localDescription}))}));case 9:case"end":return e.stop()}}),e)})),a.s();case 7:if((s=a.n()).done){e.next=11;break}return e.delegateYield(l(),"t0",9);case 9:e.next=7;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e["catch"](4),a.e(e.t1);case 16:return e.prev=16,a.f(),e.finish(16);case 19:if("answer"!==i.type){e.next=29;break}return console.log("antwoord van raspberrypi binnen"),u=o.get(i.from),console.log(i.data.sdp),e.next=25,u.setRemoteDescription(i.data);case 25:console.log(u),console.log(u.connectionState),console.log(u.iceConnectionState),console.log(u.signalingState);case 29:"disconnect"===i.type&&(d=o.get(i.from),B.status="controller disconnect",B.statusButton="connect",d&&(console.log("Disconnecting from",i.from),d.close(),o.delete(i.from)));case 30:case"end":return e.stop()}}),e,null,[[4,13,16,19]])})));return function(t){return e.apply(this,arguments)}}()),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](5),console.log("error: "+e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})))()},videoStream:function(){var e=this;return Object(M["a"])(regeneratorRuntime.mark((function t(){var n,r,o,i,a,c,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={iceServers:[{urls:"turn:turn.stepverder.nl:3478",username:"Dominique",credential:"WS7Yq_jT"}]},r=function(){return Math.floor(1e4*Math.random())},o="ipcar"+r(),i="screen",a=new Map,s=function(){var e=Object(M["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!c){e.next=2;break}return e.abrupt("return",c);case 2:return e.abrupt("return",new Promise((function(e,r){try{c=new WebSocket("wss://stepverder.nl:4084/ipcar"),console.log(t);var o=function r(){c.send(JSON.stringify({type:"register",peerType:n,peerId:t})),c.removeEventListener("open",r),e(c)};c.addEventListener("open",o)}catch(i){r(i)}})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.prev=6,console.log("in screen"),t.next=10,s(o,i);case 10:l=t.sent,l.addEventListener("message",function(){var t=Object(M["a"])(regeneratorRuntime.mark((function t(r){var i,c,s,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,i=JSON.parse(r.data),console.log(i),"offer"!==i.type){t.next=20;break}return c=new RTCPeerConnection(n),a.set(i.from,c),console.log("incoming data "),e.camera="online",e.statusButton="online",e.InActive=!1,e.Active=!0,c.ontrack=function(t){e.status="camera",B.online(),console.log("on track",t),window.v.srcObject=t.streams[0],window.v.play()},c.onicecandidate=function(e){console.log("set icecandidate"),e.candidate&&l.send(JSON.stringify({type:"candidate",from:o,to:i.from,data:e.candidate}))},t.next=14,c.setRemoteDescription(i.data);case 14:return t.next=16,c.createAnswer();case 16:return s=t.sent,t.next=19,c.setLocalDescription(s);case 19:l.send(JSON.stringify({to:i.from,from:o,type:"answer",data:c.localDescription}));case 20:"disconnect"===i.type&&(u=a.get(i.from),u&&(e.status="camera disconnect",e.camera="Offline",e.statusButton="connect",e.InActive=!0,e.Active=!1,console.log("Disconnecting from",i.from),u.ontrack=null,u.onicecandidate=null,u.close(),a.delete(i.from))),"candidate"===i.type&&(console.log(i.data),d=a.get(i.from),d&&(console.log("Adding candidate to",i.from),d.addIceCandidate(new RTCIceCandidate(i.data)))),t.next=28;break;case 24:t.prev=24,t.t0=t["catch"](0),console.error(t.t0),console.log("error video beeld niet ontvangen "+t.t0);case 28:case"end":return t.stop()}}),t,null,[[0,24]])})));return function(e){return t.apply(this,arguments)}}()),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](6),console.error(t.t0),console.log("error verbinding mislukt: "+t.t0);case 18:case"end":return t.stop()}}),t,null,[[6,14]])})))()}}};n("d072");const N=a()(I,[["render",E],["__scopeId","data-v-382ace80"]]);var J=N,q=[{path:"/",name:"Home",component:J},{path:"/about",name:"about",component:function(){return n.e("livestream").then(n.bind(null,"f820"))}},{path:"/broadcast/:id",name:"Broadcast",component:function(){return n.e("livestream").then(n.bind(null,"3821"))}},{path:"/webrtctest",name:"webrtctest",component:function(){return n.e("livestream").then(n.bind(null,"19a6"))}},{path:"/raspberrypi",name:"raspberrypi",component:function(){return n.e("livestream").then(n.bind(null,"0adf"))}},{path:"/controller",name:"controller",component:function(){return n.e("livestream").then(n.bind(null,"3559"))}},{path:"/chris",name:"chris",component:function(){return n.e("livestream").then(n.bind(null,"2a48"))}}],V=Object(u["a"])({history:Object(u["b"])("/"),routes:q}),W=V,Y=n("9483");Object(Y["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var H=Object(T["a"])();Object(r["b"])(l).use(W).use(H).mount("#app")},a5be:function(e,t,n){},b2da:function(e,t,n){},c15d:function(e,t,n){},d072:function(e,t,n){"use strict";n("368c")},e6e5:function(e,t,n){"use strict";function r(e,t,n,r,o,i){return null}var o=n("b85c"),i=n("1da1"),a=(n("96cf"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("e9c4"),null),c={data:function(){return{data:1}},created:function(){},computed:{},methods:{sendData:function(){this.data=Math.floor(100*Math.random()),console.log(this.data),a.send(this.data),window.requestAnimationFrame(this.sendData)},carControl:function(){return Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,c,s,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("link naar component werktS"),t={sdpSemantics:"unified-plan",iceServers:[{urls:"turn:turn.stepverder.nl:3478",username:"Dominique",credential:"WS7Yq_jT"}]},n="controldata",r="controller",c=new Map,l=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return",s);case 2:return e.abrupt("return",new Promise((function(e,r){try{s=new WebSocket("wss://stepverder.nl:4084/controller");var o=function r(){s.send(JSON.stringify({type:"register",peerType:n,peerId:t})),s.removeEventListener("open",r),e(s)};s.addEventListener("open",o)}catch(i){r(i),console.log(i)}})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.prev=6,console.log("in controller"),e.next=10,l(n,r);case 10:u=e.sent,u.addEventListener("message",function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r){var i,s,l,d,p,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=JSON.parse(r.data),"Raspberrypis"!==i.type){e.next=19;break}console.log("raspberry pi probeert te verbinden"),s=Object(o["a"])(i.Raspberrypis),e.prev=4,d=regeneratorRuntime.mark((function e(){var r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=l.value,o=new RTCPeerConnection(t),c.set(r,o),o.addEventListener("icegatheringstatechange",(function(){console.log(o.connectionState)})),a=o.createDataChannel("sendDataChannel",{ordered:!1,maxRetransmits:0}),a.onopen=function(e){console.log("hi you"),a.send("Hi raspberrypi!")},console.log(a),e.next=9,o.createOffer().then((function(e){return o.setLocalDescription(e)})).then((function(){return new Promise((function(e){if("complete"===o.iceGatheringState)e();else{function t(){console.log(o.iceGatheringState),"complete"===o.iceGatheringState&&(o.removeEventListener("icegatheringstatechange",t),e())}o.addEventListener("icegatheringstatechange",t)}}))})).then((function(){console.log(o),console.log("offer wordt gestuurd"),u.send(JSON.stringify({type:"offer",to:r,from:n,data:o.localDescription}))}));case 9:case"end":return e.stop()}}),e)})),s.s();case 7:if((l=s.n()).done){e.next=11;break}return e.delegateYield(d(),"t0",9);case 9:e.next=7;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e["catch"](4),s.e(e.t1);case 16:return e.prev=16,s.f(),e.finish(16);case 19:if("answer"!==i.type){e.next=29;break}return console.log("antwoord van raspberrypi binnen"),p=c.get(i.from),console.log(i.data.sdp),e.next=25,p.setRemoteDescription(i.data);case 25:console.log(p),console.log(p.connectionState),console.log(p.iceConnectionState),console.log(p.signalingState);case 29:"disconnect"===i.type&&(h=c.get(i.from),h&&(console.log("Disconnecting from",i.from),h.close(),c.delete(i.from)));case 30:case"end":return e.stop()}}),e,null,[[4,13,16,19]])})));return function(t){return e.apply(this,arguments)}}()),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](6),console.log("error: "+e.t0);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})))()}}},s=(n("2d0a"),n("6b0d")),l=n.n(s);const u=l()(c,[["render",r],["__scopeId","data-v-60669cdd"]]);t["a"]=u},fc05:function(e,t,n){"use strict";n("b2da")}});
//# sourceMappingURL=app.js.map